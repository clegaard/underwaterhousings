generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model HousingManufacturer {
    id          String    @id @default(cuid())
    name        String    @unique
    slug        String    @unique
    description String?
    housings    Housing[]

    @@map("housing_manufacturers")
}

model CameraManufacturer {
    id        String   @id @default(cuid())
    name      String   @unique
    slug      String   @unique
    isActive  Boolean  @default(true)
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    cameras   Camera[]

    @@map("camera_manufacturers")
}

model Camera {
    id                   String             @id @default(cuid())
    name                 String
    slug                 String             @unique
    brand                CameraManufacturer @relation(fields: [cameraManufacturerId], references: [id])
    housings             Housing[]
    cameraManufacturerId String

    @@map("cameras")
}

model Housing {
    id                    String              @id @default(cuid())
    model                 String
    name                  String
    slug                  String              @unique
    description           String?
    priceAmount           Decimal?            @db.Decimal(10, 2)
    priceCurrency         String?             @default("USD")
    depthRating           Int
    material              String?
    manufacturer          HousingManufacturer @relation(fields: [housingManufacturerId], references: [id])
    Camera                Camera?             @relation(fields: [cameraId], references: [id])
    cameraId              String?
    housingManufacturerId String

    @@map("housings")
}
